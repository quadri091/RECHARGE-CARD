<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <title>Card Generator</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, Helvetica, sans-serif;
      }
      body {
        background: linear-gradient(#cfdef3);
        height: 100vh;
        align-items: center;
        padding: 50px 0px;
      }
      .button-set {
        display: flex;
        justify-content: center;
        gap: 15px;
      }
      .button1,
      .button2,
      .button3,
      .button4 {
        width: 95px;
        height: 95px;
        border-radius: 5px;
        overflow: hidden;
        display: flex;
        transition: all 0.4s ease;
        cursor: pointer;
        align-items: center;
        justify-content: center;
        border: 5px solid transparent;
        img {
          height: 95%;
          width: 95%;
        }
      }
      .button1:hover {
        border-color: #ffcc00;
      }
      .button2:hover {
        border-color: red;
      }
      .button3:hover {
        border-color: green;
      }
      .button4:hover {
        border-color: black;
      }
      section {
        width: 530px;
        margin: auto;
        box-shadow: 0 0px 55px rgba(0, 0, 0, 0.1), 0 0px 35px rgba(0, 0, 0, 0.1),
          0 0px 15px rgba(0, 0, 0, 0.1);
        background-color: white;
        display: flex;
        flex-direction: column;
        border-radius: 15px;
        padding: 20px 0px;
        align-items: center;
        gap: 20px;
        overflow: auto;
        scrollbar-width: none;
      }
      main {
        width: 90%;
        display: none;
        flex-direction: column;
        gap: 20px;
      }
      .control {
        align-items: center;
        background-color: #ffc107;
        display: flex;
        color: white;
        justify-content: space-between;
        padding: 7px 12px;
        border-radius: 5px;
      }
      .result {
        display: none;
        flex-direction: column;
        span {
          font-weight: bold;
        }
      }
      .button-set-2 {
        display: flex;
        justify-content: space-between;
        gap: 20px 0px;
        flex-wrap: wrap;
        button {
          width: 30%;
          padding: 12px 0px;
          font-weight: 700;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 5px;
          border: none;
          cursor: pointer;
          box-shadow: 0 0px 55px rgba(0, 0, 0, 0.1),
            0 0px 35px rgba(0, 0, 0, 0.1), 0 0px 15px rgba(0, 0, 0, 0.1);
        }
        button:hover {
          background-color: rgba(211, 211, 211, 0.521);
        }
      }
      .load {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      th {
        border: 2px solid black;
        text-align: center;
        vertical-align: middle;
        padding: 3px 0px;
      }
      td {
        border: 1px solid black;
        text-align: center;
        vertical-align: middle;
        padding: 3px 0px;
      }
      @media (max-width: 575px) {
        section {
          width: 340px;
        }
        .button1,
        .button2,
        .button3,
        .button4 {
          width: 65px;
          height: 65px;
        }
        .news {
          font-size: 12px;
        }
        td,
        th {
          font-size: 13px;
        }
      }
    </style>
  </head>
  <body>
    <section id="section">
      <h2 class="fw-bold text-primary text-center">Recharge Card Generator</h2>
      <div class="button-set">
        <button class="button1" onclick="mtn('MTN')">
          <img
            src="https://i.pinimg.com/1200x/0a/f0/0e/0af00e1d78100d4019d3344873902d5a.jpg"
            alt=""
          />
        </button>
        <button class="button2" onclick="airtel('AIRTEL')">
          <img
            src="https://i.pinimg.com/1200x/56/64/ce/5664ce800352d0d526d6a88d4b1d078d.jpg"
            alt=""
          />
        </button>
        <button class="button3" onclick="glo('GLO')">
          <img
            src="https://i.pinimg.com/736x/62/2e/c5/622ec535be0300f53a53b2e7b54c1646.jpg"
            alt=""
          />
        </button>
        <button class="button4" onclick="last('9Mobile')">
          <img
            src="https://i.pinimg.com/1200x/0b/27/80/0b2780b8ad9be7d07fcd436802c82da6.jpg"
            alt=""
          />
        </button>
      </div>

      <main id="data">
        <div class="control">
          <div class="left">
            <p class="mb-0 fw-bold">
              Balance: ₦<span id="balance-amount">1000</span>
            </p>
          </div>
          <div class="right">
            <p class="mb-0 fw-bold"><span id="network"></span></p>
          </div>
        </div>
        <div class="button-set-2">
          <button onclick="buy(this)">₦50.00</button>
          <button onclick="buy(this)">₦100.00</button>
          <button onclick="buy(this)">₦200.00</button>
          <button onclick="buy(this)">₦500.00</button>
          <button onclick="buy(this)">₦750.00</button>
          <button onclick="buy(this)">₦1000.00</button>
        </div>
        <div class="d-flex mt-2 gap-4">
          <input
            placeholder="Enter Amount"
            type="number"
            class="form-control input-1"
          />
          <input
            placeholder="Enter purchased code"
            type="text"
            class="form-control input-2"
          />
        </div>
        <div class="load">
          <button class="btn btn-primary fw-bold news" onclick="generate()">
            Generate Code
          </button>
          <button class="btn btn-primary fw-bold news" onclick="load()">
            Load Card
          </button>
        </div>
        <div class="result">
          <span id="top"></span>
          <span id="bottom"></span>
        </div>
        <div class="d-flex justify-content-between">
          <button class="btn btn-primary fw-bold news">All Cards</button>
          <button class="btn btn-primary fw-bold news">Used Cards</button>
          <button class="btn btn-primary fw-bold news">Unused Card</button>
        </div>

        <table>
          <thead>
            <tr>
              <th>S/N</th>
              <th>Amount</th>
              <th>Network</th>
              <th>Used</th>
              <th>Pin</th>
            </tr>
          </thead>
          <tbody id="t-body"></tbody>
        </table>
      </main>
    </section>
  </body>
</html>

<script>
  let data = document.getElementById("data");
  let section = document.getElementById("section");
  let balance = document.getElementById("balance-amount");
  let network = document.getElementById("network");
  let control = document.querySelector(".control");
  let firstInput = document.querySelector(".input-1");
  let secondInput = document.querySelector(".input-2");
  let result = document.querySelector(".result");
  let spanTop = document.getElementById("top");
  let spanMessage = document.getElementById("bottom");
  let tbody = document.getElementById("t-body");
  let selectedNetwork = "";
  let condition = "";
  let pin = "PIN";
  let newInp = firstInput.value.trim();
  let mini = [];

  function mtn(params) {
    selectedNetwork = params;
    data.style.display = "flex";
    document.body.style.display = "flex";
    document.body.style.padding = "0";
    section.style.height = "70%";
    control.style.backgroundColor = "#ffc107";
    network.innerHTML = selectedNetwork;
  }

  function airtel(params) {
    selectedNetwork = params;
    data.style.display = "flex";
    document.body.style.display = "flex";
    document.body.style.padding = "0";
    section.style.height = "70%";
    control.style.backgroundColor = "darkred";
    network.innerHTML = selectedNetwork;
  }

  function glo(params) {
    selectedNetwork = params;
    data.style.display = "flex";
    document.body.style.display = "flex";
    document.body.style.padding = "0";
    section.style.height = "70%";
    control.style.backgroundColor = "green";
    network.innerHTML = selectedNetwork;
  }

  function last(params) {
    selectedNetwork = params;
    data.style.display = "flex";
    document.body.style.display = "flex";
    document.body.style.padding = "0";
    section.style.height = "70%";
    control.style.backgroundColor = "black";
    network.innerHTML = selectedNetwork;
  }

  function buy(params) {
    firstInput.value = params.innerHTML.slice(1);
  }

  secondInput.value = `*311*PIN#`;

  function generate() {
    if (!firstInput.value.trim()) {
      alert("Input an amount");
      return;
    }
    result.style.display = "flex";
    let num1 = Math.floor(Math.random() * 10);
    let num2 = Math.floor(Math.random() * 10);
    let num3 = Math.floor(Math.random() * 10);
    let num4 = Math.floor(Math.random() * 10);
    let num5 = Math.floor(Math.random() * 10);
    let num6 = Math.floor(Math.random() * 10);
    let num7 = Math.floor(Math.random() * 10);
    let num8 = Math.floor(Math.random() * 10);
    let num9 = Math.floor(Math.random() * 10);
    let num10 = Math.floor(Math.random() * 10);

    let digit = `${num1}${num2}${num3}${num4}${num5}${num6}${num7}${num8}${num9}${num10}`;

    spanTop.innerHTML = digit;

    balance.innerHTML -= firstInput.value.trim();

    if (balance <= 0) {
      alert("Balance is low for the transaction");
      return;
    }

    secondInput.value = `*311*${spanTop.innerHTML}#`;

    if (selectedNetwork === "MTN") {
      spanTop.style.color = "#ffc107";
      spanMessage.style.color = "#ffc107";
    } else if (selectedNetwork === "AIRTEL") {
      spanTop.style.color = "red";
      spanMessage.style.color = "red";
    } else if (selectedNetwork === "GLO") {
      spanTop.style.color = "green";
      spanMessage.style.color = "green";
    } else {
      spanTop.style.color = "black";
      spanMessage.style.color = "black";
    }
    spanMessage.innerHTML = `This is your code for ₦${firstInput.value.trim()}  ${selectedNetwork} card`;

    condition = "False";

    display();
  }

  function load() {
    for (let index2 = 0; index2 < mini.length; index2++) {
      if (secondInput.value.trim() === `*311*${mini[index2].pin}#`) {
        alert(
          `You have successfully loaded ₦${mini[index2].amount} of ${mini[index2].networkType} card`
        );

        mini[index2].used = "True";

        tbody.innerHTML = "";

        for (let index3 = 0; index3 < mini.length; index3++) {
          tbody.innerHTML += `<tr">
            <td>${index3 + 1}</td>
            <td>${mini[index3].amount}</td>
            <td>${mini[index3].networkType}</td>
            <td>${mini[index3].used}</td>
            <td>${mini[index3].pin}</td>
          </tr>`;
        }

        break;
      } else {
        alert("Invalid Code");
      }
    }

    firstInput.value = "";
    secondInput.value = "*311*PIN#";
    spanTop.innerHTML = "";
    spanMessage.innerHTML = "";
  }

  function display() {
    let object = {
      amount: firstInput.value.trim(),
      networkType: selectedNetwork,
      used: condition,
      pin: spanTop.innerHTML,
    };

    mini.push(object);

    console.log(mini);

    tbody.innerHTML = "";

    for (let index = 0; index < mini.length; index++) {
      tbody.innerHTML += `<tr">
            <td>${index + 1}</td>
            <td>${mini[index].amount}</td>
            <td>${mini[index].networkType}</td>
            <td>${mini[index].used}</td>
            <td>${mini[index].pin}</td>
          </tr>`;
    }
  }
</script>
